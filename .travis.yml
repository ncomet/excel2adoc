language: java
jdk: openjdk11

after_success:
  - bash <(curl -s https://codecov.io/bash)

cache:
  directories:
    - $HOME/.m2

services:
  - docker

before_deploy:
  - mvn package -B -DskipTests=true -Pnative -Dquarkus.native.container-build=true
  - mv target/excel2adoc-*runner target/excel2adoc

deploy:
  - provider: releases
    api_key: "${GITHUB_TOKEN}"
    file_glob: true
    file: target/excel2adoc
    skip_cleanup: true
    on:
      repo: "${TRAVIS_REPO_SLUG}"
      branch: master
      tags: true